<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Mirte new password</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

</head>

<body>
    <h1>Create new password:</h1>
    <form id="form">
        <input type="password" id="password" />
        <input type="submit" value="Submit!" />

    </form>
    <script>
        function sendPasswd() {
            var url = "/login/newpasswd";


            const newPassword = document.getElementById('password').value.trim();
            console.log(newPassword);
            if (newPassword.length < 8) { // Wifi requires 8 chars
                alert("password too short!");
                return;
            }
            var xhr = new XMLHttpRequest();
            xhr.open("PUT", url, true);
            xhr.setRequestHeader('Content-type', 'text/plain; charset=utf-8');
            xhr.onload = function () {
                if (xhr.readyState == 4 && xhr.status == "204") {
                    alert("password uploaded")
                }
            }
            xhr.send(newPassword);

        }

        function logSubmit(event) {
            event.preventDefault();
            sendPasswd();

        }
        const form = document.getElementById("form");
        form.addEventListener("submit", logSubmit);

    </script>
</body>

</html>