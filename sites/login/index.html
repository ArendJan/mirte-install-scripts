<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Mirte login</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

</head>

<body>
    <!-- TODO: make it nicer for the eyes! -->
    <form id="form">
        <input type="password" id="password" />
        <input type="submit" value="Log in!" />

    </form>
    <script>
        function logSubmit(event) {
            event.preventDefault();
            password = document.getElementById('password').value;
            domain = window.location.hostname
            document.cookie = `password=${encodeURIComponent(password)}; expires=Fri, 31 Dec 2023 23:59:59 GMT;domain=${domain};path=/`;
            let params = new URL(document.location).searchParams;
            target = "/";
            if (params.has('target')) { // where to navigate to.
                target = params.get("target");
            }
            window.location.href = target;

        }
        const form = document.getElementById("form");
        form.addEventListener("submit", logSubmit);
    </script>
</body>

</html>
<!-- This page will only be show when either the password cookie is not correct/set and the user is not accessing the site from a 'safe' ip -->