<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Index</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>

<body>
    <div id="links"></div>
    <!-- TODO: make this site more visually pleasing and maybe show status of each component. -->
    <script>

        // TODO: This function does not work 100%
        async function fetchStatus(address) {
            return new Promise((res) => { 

                fetch(address,
                    { method: "HEAD", redirect: "error" }
                ).then((res2) => {
                    if (res2.ok) {
                        return res(true);
                        // file is present at URL
                    } else {
                        res(false);
                        // file is not present at URL
                    }
                }).catch((e)=>{
                    res(false);
                });

            })
        }
        async function checkSites() {
            proms = []
            pages = ["/", "/docs/", "/ros-video/", "/jupyter/", "/code/", "/login/", "/login/changepassword/", "/list/"]
            for (page of pages) {
                document.getElementById('links').innerHTML = l.map(v=>`<a href="${v}">${v}</a>`).join("<br>");
                // proms.push(fetchStatus(page));
            }
            // out = await Promise.all(proms);
            // console.log(out);
            // l = out.map((v, i) => {
            //     return `<a href="${pages[i]}">${v ? '✔' : '❌'}: ${pages[i]}</a>`;
            // })
            // console.log(l);
            document.getElementById('links').innerHTML = l.join("<br>");
        }
        checkSites();
    </script>
</body>

</html>